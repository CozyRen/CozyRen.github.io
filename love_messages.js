// =================== –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ª—é–±–æ–≤–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π ===================
function initLoveMessageGenerator() {
  console.log('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ –ª—é–±–æ–≤–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π');
  
  // –ü–æ–ª—É—á–∞–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
  const messageText = document.getElementById('love-message-text');
  const generateBtn = document.getElementById('generate-love-message');
  const messageLoader = document.getElementById('love-message-loader');
  const loveSection = document.getElementById('love-generator');
  
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
  if (!messageText || !generateBtn || !messageLoader) {
    console.error('–ù–µ –Ω–∞–π–¥–µ–Ω—ã –æ—Å–Ω–æ–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ –ª—é–±–æ–≤–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π');
    return;
  }
  
  console.log('–í—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ –ª—é–±–æ–≤–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞–π–¥–µ–Ω—ã');
  
  // –ë–∞–∑–∞ –ª—é–±–æ–≤–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º
  const loveMessages = [
    "–¢—ã –º–æ—ë —Å–æ–ª–Ω—Ü–µ –≤ –ø–∞—Å–º—É—Ä–Ω—ã–π –¥–µ–Ω—å –∏ –º–æ—è –∑–≤–µ–∑–¥–∞ –≤ —Ç—ë–º–Ω—É—é –Ω–æ—á—å. –õ—é–±–ª—é —Ç–µ–±—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ ‚ù§Ô∏è",
    "–ö–∞–∂–¥—ã–π –º–æ–º–µ–Ω—Ç —Å —Ç–æ–±–æ–π –¥–ª—è –º–µ–Ω—è –¥—Ä–∞–≥–æ—Ü–µ–Ω–µ–Ω. –Ø –±–ª–∞–≥–æ–¥–∞—Ä–µ–Ω —Å—É–¥—å–±–µ –∑–∞ —Ç–æ, —á—Ç–æ —Ç—ã —É –º–µ–Ω—è –µ—Å—Ç—å üíï",
    "–¢—ã –∑–∞–ø–æ–ª–Ω—è–µ—à—å –º–æ—é –∂–∏–∑–Ω—å —Ä–∞–¥–æ—Å—Ç—å—é –∏ —Å–º—ã—Å–ª–æ–º. –° —Ç–æ–±–æ–π —è –æ–±—Ä—ë–ª –Ω–∞—Å—Ç–æ—è—â–µ–µ —Å—á–∞—Å—Ç—å–µ üíò",
    "–ö–æ–≥–¥–∞ —è —Ä—è–¥–æ–º —Å —Ç–æ–±–æ–π, –≤—Ä–µ–º—è –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è, –∏ –≤–µ—Å—å –º–∏—Ä –≤–æ–∫—Ä—É–≥ –∏—Å—á–µ–∑–∞–µ—Ç. –¢—ã - –º–æ—è –≤—Å–µ–ª–µ–Ω–Ω–∞—è üåå",
    "–ú–æ–∏ —á—É–≤—Å—Ç–≤–∞ –∫ —Ç–µ–±–µ —Ç–æ–ª—å–∫–æ —Ä–∞—Å—Ç—É—Ç —Å –∫–∞–∂–¥—ã–º –¥–Ω—ë–º. –Ø –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –¥—É–º–∞–ª, —á—Ç–æ –º–æ–∂–Ω–æ –ª—é–±–∏—Ç—å –∫–æ–≥–æ-—Ç–æ —Ç–∞–∫ —Å–∏–ª—å–Ω–æ üíì",
    "–¢–≤–æ—è —É–ª—ã–±–∫–∞ ‚Äî –º–æ—ë –ª—é–±–∏–º–æ–µ –∑—Ä–µ–ª–∏—â–µ, —Ç–≤–æ–π —Å–º–µ—Ö ‚Äî –º–æ—è –ª—é–±–∏–º–∞—è –º–µ–ª–æ–¥–∏—è. –¢—ã ‚Äî –º–æ—ë –≤—Å—ë ‚ú®",
    "–Ø —Ç–∞–∫ –±–ª–∞–≥–æ–¥–∞—Ä–µ–Ω –∑–∞ —Ç–≤–æ—é –ª—é–±–æ–≤—å –∏ –∑–∞–±–æ—Ç—É. –¢—ã –¥–µ–ª–∞–µ—à—å –º–µ–Ω—è –ª—É—á—à–µ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å üôè",
    "–ú–æ—ë —Å–µ—Ä–¥—Ü–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç —Ç–µ–±–µ –Ω–∞–≤—Å–µ–≥–¥–∞. –¢—ã ‚Äî –ª—É—á—à–µ–µ, —á—Ç–æ –∫–æ–≥–¥–∞-–ª–∏–±–æ —Å–ª—É—á–∞–ª–æ—Å—å —Å–æ –º–Ω–æ–π üíñ",
    "–° —Ç–æ–±–æ–π —è –æ–±—Ä—ë–ª —Å–º—ã—Å–ª –∂–∏–∑–Ω–∏. –¢—ã –º–æ–π —è–∫–æ—Ä—å –∏ –º–æ–π –ø–∞—Ä—É—Å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ üåä",
    "–¢—ã –∑–∞–∂–∏–≥–∞–µ—à—å –æ–≥–æ–Ω—å –≤ –º–æ–µ–π –¥—É—à–µ. –°–ø–∞—Å–∏–±–æ, —á—Ç–æ –ª—é–±–∏—à—å –º–µ–Ω—è —Ç–∞–∫–∏–º, –∫–∞–∫–æ–π —è –µ—Å—Ç—å üî•",
    "–Ø —Ö–æ—á—É –ø—Ä–æ—Å–Ω—É—Ç—å—Å—è —Ä—è–¥–æ–º —Å —Ç–æ–±–æ–π –∏ –∫–∞–∂–¥–æ–µ —É—Ç—Ä–æ –≥–æ–≤–æ—Ä–∏—Ç—å, –∫–∞–∫ —Å–∏–ª—å–Ω–æ —è —Ç–µ–±—è –ª—é–±–ª—é üåû",
    "–¢—ã –º–æ–π —Å–∞–º—ã–π —Ü–µ–Ω–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫ —Å—É–¥—å–±—ã. –ú–æ—è –ª—é–±–æ–≤—å –∫ —Ç–µ–±–µ –±–µ–∑–≥—Ä–∞–Ω–∏—á–Ω–∞ üéÅ",
    "–ö–æ–≥–¥–∞ —Ç—ã –±–µ—Ä—ë—à—å –º–µ–Ω—è –∑–∞ —Ä—É–∫—É, —è —á—É–≤—Å—Ç–≤—É—é, —á—Ç–æ –Ω–∞–º –ø–æ–¥–≤–ª–∞—Å—Ç–Ω–æ –≤—Å—ë –Ω–∞ —Å–≤–µ—Ç–µ. –í–º–µ—Å—Ç–µ –º—ã ‚Äî —Å–∏–ª–∞ üë´",
    "–ú–µ—á—Ç–∞—é –æ —Ç–æ–º –¥–Ω–µ, –∫–æ–≥–¥–∞ —è —Å–º–æ–≥—É –Ω–∞–∑–≤–∞—Ç—å —Ç–µ–±—è —Å–≤–æ–µ–π –Ω–∞–≤—Å–µ–≥–¥–∞. –¢—ã ‚Äî –º–æ—è —Å—É–¥—å–±–∞ üí´",
    "–¢–≤–æ—è –ª—é–±–æ–≤—å –¥–µ–ª–∞–µ—Ç –º–µ–Ω—è —Å–∞–º—ã–º —Å—á–∞—Å—Ç–ª–∏–≤—ã–º —á–µ–ª–æ–≤–µ–∫–æ–º –Ω–∞ –∑–µ–º–ª–µ. –Ø –æ–±–µ—â–∞—é –±–µ—Ä–µ—á—å —Ç–≤–æ—ë —Å–µ—Ä–¥—Ü–µ üíó",
    "–¢—ã –Ω–µ –ø—Ä–æ—Å—Ç–æ —á–µ–ª–æ–≤–µ–∫ –≤ –º–æ–µ–π –∂–∏–∑–Ω–∏, —Ç—ã - –º–æ—è –∂–∏–∑–Ω—å. –î—ã—à—É —Ç–æ–±–æ–π, –∂–∏–≤—É –¥–ª—è —Ç–µ–±—è üíû",
    "–Ø –≥–æ—Ç–æ–≤ –ø–æ–¥–∞—Ä–∏—Ç—å —Ç–µ–±–µ –≤–µ—Å—å –º–∏—Ä, –ª–∏—à—å –±—ã –≤–∏–¥–µ—Ç—å —Ç–≤–æ—é —É–ª—ã–±–∫—É –∫–∞–∂–¥—ã–π –¥–µ–Ω—å üåç",
    "–ú–æ—ë —Å–µ—Ä–¥—Ü–µ –ø–æ—ë—Ç –∫–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ —è –¥—É–º–∞—é –æ —Ç–µ–±–µ. –¢—ã - –º–æ—è –ª—é–±–∏–º–∞—è –º–µ–ª–æ–¥–∏—è üéµ",
    "–ü—É—Å—Ç—å —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –Ω–∞–º–∏ –±—É–¥–µ—Ç –ª—é–±—ã–º, –Ω–æ –º–æ—ë —Å–µ—Ä–¥—Ü–µ –≤—Å–µ–≥–¥–∞ —Ä—è–¥–æ–º —Å —Ç–æ–±–æ–π üíå",
    "–¢—ã –º–æ–π —Å–∞–º—ã–π –∫—Ä–∞—Å–∏–≤—ã–π —Å–æ–Ω, –∫–æ—Ç–æ—Ä—ã–π —Å—Ç–∞–ª —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å—é. –ë–æ—é—Å—å –ø—Ä–æ—Å–Ω—É—Ç—å—Å—è –±–µ–∑ —Ç–µ–±—è üí≠",
    "–í –∫–∞–∂–¥–æ–º –±–∏–µ–Ω–∏–∏ –º–æ–µ–≥–æ —Å–µ—Ä–¥—Ü–∞ –∑–≤—É—á–∏—Ç —Ç–≤–æ—ë –∏–º—è. –¢—ã - –º–æ–π —Ä–∏—Ç–º –∂–∏–∑–Ω–∏ üíì",
    "–¢–≤–æ—è –ª—é–±–æ–≤—å –ø–æ–¥–æ–±–Ω–∞ –∑–≤—ë–∑–¥–∞–º - –¥–∞–∂–µ –≤ —Å–∞–º—É—é —Ç—ë–º–Ω—É—é –Ω–æ—á—å –æ—Å–≤–µ—â–∞–µ—Ç –º–æ–π –ø—É—Ç—å ‚ú®",
    "–í—Å—Ç—Ä–µ—Ç–∏—Ç—å —Ç–µ–±—è –±—ã–ª–æ —Å—É–¥—å–±–æ–π, –ø–æ–ª—é–±–∏—Ç—å —Ç–µ–±—è –±—ã–ª–æ –≤—ã–±–æ—Ä–æ–º, –∞ –±—ã—Ç—å —Å —Ç–æ–±–æ–π - —ç—Ç–æ –±–ª–∞–≥–æ—Å–ª–æ–≤–µ–Ω–∏–µ üôå",
    "–•–æ—Ç–µ–ª –±—ã —è –±—ã—Ç—å –ø–æ—ç—Ç–æ–º, —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ —Å–ª–æ–≤–∞, –¥–æ—Å—Ç–æ–π–Ω—ã–µ –æ–ø–∏—Å–∞—Ç—å –º–æ—é –ª—é–±–æ–≤—å –∫ —Ç–µ–±–µ üìù",
    "–¢—ã —Å–ª–æ–≤–Ω–æ –ø–µ—Ä–≤—ã–π –ª—É—á —Å–æ–ª–Ω—Ü–∞, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–±—É–∂–¥–∞–µ—Ç –≤–æ –º–Ω–µ —Å–∞–º—ã–µ —Å–≤–µ—Ç–ª—ã–µ —á—É–≤—Å—Ç–≤–∞ üåÖ",
    "–í —Ç–≤–æ–∏—Ö –≥–ª–∞–∑–∞—Ö —è –≤–∏–∂—É –æ—Ç—Ä–∞–∂–µ–Ω–∏–µ –≤—Å–µ–≥–æ —Å—á–∞—Å—Ç—å—è, –æ –∫–æ—Ç–æ—Ä–æ–º —Ç–æ–ª—å–∫–æ –º–æ–∂–Ω–æ –º–µ—á—Ç–∞—Ç—å üëÅÔ∏è",
    "–¢—ã —Ç–∞, –∫–æ–≥–æ —è –∏—Å–∫–∞–ª –≤—Å—é –∂–∏–∑–Ω—å, –¥–∞–∂–µ –Ω–µ –æ—Å–æ–∑–Ω–∞–≤–∞—è —ç—Ç–æ–≥–æ. –¢–µ–ø–µ—Ä—å —è –Ω–∞—à—ë–ª —Ç–µ–±—è –∏ –Ω–µ –æ—Ç–ø—É—â—É üîç",
    "–õ—é–±–∏—Ç—å —Ç–µ–±—è ‚Äî —Å–∞–º–æ–µ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–µ, —á—Ç–æ —Å–ª—É—á–∞–ª–æ—Å—å —Å–æ –º–Ω–æ–π. –≠—Ç–æ —á—É–≤—Å—Ç–≤–æ –¥–∞—Ä–∏—Ç –º–Ω–µ –∫—Ä—ã–ª—å—è üïäÔ∏è",
    "–Ø –±–ª–∞–≥–æ–¥–∞—Ä–µ–Ω –∫–∞–∂–¥–æ–º—É –º–≥–Ω–æ–≤–µ–Ω–∏—é, –ø—Ä–æ–≤–µ–¥—ë–Ω–Ω–æ–º—É —Å —Ç–æ–±–æ–π. –ö–∞–∂–¥–∞—è –º–∏–Ω—É—Ç–∞ —Ä—è–¥–æ–º —Å —Ç–æ–±–æ–π –±–µ—Å—Ü–µ–Ω–Ω–∞ ‚åõ",
    "–¢—ã –Ω–∞—É—á–∏–ª–∞ –º–µ–Ω—è –ª—é–±–∏—Ç—å —Ç–∞–∫, –∫–∞–∫ —è –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –¥—É–º–∞–ª, —á—Ç–æ —Å–º–æ–≥—É. –°–ø–∞—Å–∏–±–æ —Ç–µ–±–µ –∑–∞ —ç—Ç–æ üéì"
  ];
  
  let lastMessageIndex = -1;
  let isShowingMessage = false;
  
  // –î–æ–±–∞–≤–ª—è–µ–º —Ñ–æ–Ω–æ–≤—ã–µ —Å–µ—Ä–¥–µ—á–∫–∏
  createBackgroundHearts();
  
  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–æ–Ω–æ–≤—ã—Ö —Å–µ—Ä–¥–µ—á–µ–∫
  function createBackgroundHearts() {
    if (!loveSection) return;
    
    const heartColors = ['#ff6b95', '#ff95b5', '#ffb6c1', '#ffd2da'];
    
    for (let i = 0; i < 12; i++) {
      const heart = document.createElement('div');
      heart.classList.add('bg-heart');
      
      // –°–ª—É—á–∞–π–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∏ –ø–æ–∑–∏—Ü–∏—è
      const size = Math.floor(Math.random() * 15) + 10; // 10-25px
      heart.style.width = `${size}px`;
      heart.style.height = `${size}px`;
      
      // –°–ª—É—á–∞–π–Ω—ã–π –æ—Ç—Ç–µ–Ω–æ–∫ —Ä–æ–∑–æ–≤–æ–≥–æ
      const colorIndex = Math.floor(Math.random() * heartColors.length);
      heart.style.backgroundColor = heartColors[colorIndex];
      
      // –°–ª—É—á–∞–π–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è
      heart.style.left = `${Math.random() * 95}%`;
      heart.style.top = `${Math.random() * 90}%`;
      
      // –°–ª—É—á–∞–π–Ω–∞—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å
      heart.style.opacity = (Math.random() * 0.15 + 0.05).toString();
      
      // –°–ª—É—á–∞–π–Ω–æ–µ –≤—Ä–∞—â–µ–Ω–∏–µ
      const rotation = Math.floor(Math.random() * 60) - 30;
      heart.style.transform = `rotate(${rotation}deg)`;
      
      // –°–ª—É—á–∞–π–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –∑–∞–¥–µ—Ä–∂–∫–∞ –∞–Ω–∏–º–∞—Ü–∏–∏
      const duration = Math.random() * 10 + 15; // 15-25 —Å–µ–∫—É–Ω–¥
      const delay = Math.random() * 5;
      heart.style.animationDuration = `${duration}s`;
      heart.style.animationDelay = `${delay}s`;
      
      loveSection.appendChild(heart);
    }
  }
  
  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
  function getRandomMessage() {
    // –ü–æ–ª—É—á–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–π –∏–Ω–¥–µ–∫—Å, –æ—Ç–ª–∏—á–Ω—ã–π –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ
    let randomIndex;
    do {
      randomIndex = Math.floor(Math.random() * loveMessages.length);
    } while (randomIndex === lastMessageIndex && loveMessages.length > 1);
    
    lastMessageIndex = randomIndex;
    return loveMessages[randomIndex];
  }
  
  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∞ "–ø–µ—á–∞—Ç–∞—é—â–µ–π—Å—è –º–∞—à–∏–Ω–∫–∏"
  // –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è - –≤—ã–≤–æ–¥–∏—Ç —Ç–µ–∫—Å—Ç –Ω–∞–ø—Ä—è–º—É—é –±–µ–∑ –ø–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏—è –±—É–∫–≤
  function typewriterEffect(element, text, speed = 40) {
    // –°—Ä–∞–∑—É —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤–µ—Å—å —Ç–µ–∫—Å—Ç –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏—è –±—É–∫–≤
    element.textContent = text;
    isShowingMessage = false;
  }
  
  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è
  function displayMessage() {
    try {
      // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
      if (isShowingMessage) return;
      isShowingMessage = true;
      
      console.log('–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ª—é–±–æ–≤–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è');
      
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
      messageLoader.classList.remove('hidden');
      messageText.style.opacity = '0';
      
      // –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–≤—É–∫–∞ "–±–∏–µ–Ω–∏—è —Å–µ—Ä–¥—Ü–∞"
      playHeartbeatSound();
      
      setTimeout(() => {
        try {
          const newMessage = getRandomMessage();
          
          // –°–∫—Ä—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
          messageLoader.classList.add('hidden');
          messageText.style.opacity = '1';
          
          // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ç–µ–∫—Å—Ç –Ω–∞–ø—Ä—è–º—É—é –±–µ–∑ —ç—Ñ—Ñ–µ–∫—Ç–∞ –ø–µ—á–∞—Ç–Ω–æ–π –º–∞—à–∏–Ω–∫–∏
          messageText.textContent = newMessage;
          isShowingMessage = false;
          
          // –î–æ–±–∞–≤–ª—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç –ø–æ—è–≤–ª–µ–Ω–∏—è
          messageText.classList.add('message-animation');
          setTimeout(() => {
            messageText.classList.remove('message-animation');
          }, 800);
          
          // –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é —Ñ–æ–Ω–æ–≤—ã—Ö —Å–µ—Ä–¥–µ—á–µ–∫
          animateBackgroundHearts();
          
        } catch (error) {
          console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ª—é–±–æ–≤–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è:', error);
          messageLoader.classList.add('hidden');
          isShowingMessage = false;
        }
      }, 1200);
      
    } catch (error) {
      console.error('–û—à–∏–±–∫–∞ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ displayMessage:', error);
      messageLoader.classList.add('hidden');
      isShowingMessage = false;
    }
  }
  
  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ —Ñ–æ–Ω–æ–≤—ã—Ö —Å–µ—Ä–¥–µ—á–µ–∫
  function animateBackgroundHearts() {
    const hearts = loveSection.querySelectorAll('.bg-heart');
    hearts.forEach(heart => {
      heart.style.animationName = 'none';
      setTimeout(() => {
        heart.style.animationName = 'float-heart';
      }, 10);
    });
  }
  
  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∑–≤—É–∫–∞ –±–∏–µ–Ω–∏—è —Å–µ—Ä–¥—Ü–∞
  function playHeartbeatSound() {
    try {
      // –°–æ–∑–¥–∞–µ–º –∞—É–¥–∏–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç
      const audioContext = new (window.AudioContext || window.webkitAudioContext)();
      
      // –°–æ–∑–¥–∞–µ–º –æ—Å—Ü–∏–ª–ª—è—Ç–æ—Ä –¥–ª—è –±–∏–µ–Ω–∏—è —Å–µ—Ä–¥—Ü–∞
      const oscillator = audioContext.createOscillator();
      const gainNode = audioContext.createGain();
      
      oscillator.type = 'sine';
      oscillator.frequency.value = 2;
      
      gainNode.gain.value = 0;
      
      oscillator.connect(gainNode);
      gainNode.connect(audioContext.destination);
      
      // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –≥—Ä–æ–º–∫–æ—Å—Ç—å
      const now = audioContext.currentTime;
      gainNode.gain.setValueAtTime(0, now);
      gainNode.gain.linearRampToValueAtTime(0.2, now + 0.1);
      gainNode.gain.linearRampToValueAtTime(0, now + 0.4);
      gainNode.gain.linearRampToValueAtTime(0.3, now + 0.6);
      gainNode.gain.linearRampToValueAtTime(0, now + 1);
      
      // –ó–∞–ø—É—Å–∫–∞–µ–º –∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º
      oscillator.start(now);
      oscillator.stop(now + 1);
    } catch (error) {
      console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–∏ –∑–≤—É–∫–∞:', error);
    }
  }
  
  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
  generateBtn.addEventListener('click', function(e) {
    e.preventDefault();
    
    // –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –Ω–∞–∂–∞—Ç–∏—è
    this.classList.add('clicked');
    setTimeout(() => {
      this.classList.remove('clicked');
    }, 200);
    
    displayMessage();
  });
  
  // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–π
  const style = document.createElement('style');
  style.textContent = `
    .message-animation {
      animation: messageAppear 0.8s cubic-bezier(0.18, 0.89, 0.32, 1.28);
    }
    
    @keyframes messageAppear {
      0% { transform: translateY(15px) scale(0.98); opacity: 0; }
      70% { transform: translateY(-5px) scale(1.01); }
      100% { transform: translateY(0) scale(1); opacity: 1; }
    }
    
    .clicked {
      transform: scale(0.95);
      transition: transform 0.2s ease;
    }
    
    .bg-heart {
      position: absolute;
      background-color: #ff6b95;
      display: block;
      clip-path: path('M12 21.593c-5.63-5.539-11-10.297-11-14.402 0-3.791 3.068-5.191 5.281-5.191 1.312 0 4.151.501 5.719 4.457 1.59-3.968 4.464-4.447 5.726-4.447 2.54 0 5.274 1.621 5.274 5.181 0 4.069-5.136 8.625-11 14.402z');
      z-index: 0;
      opacity: 0.1;
      animation: float-heart 20s linear infinite;
    }
    
    @keyframes float-heart {
      0% { transform: translateY(0) rotate(0); }
      33% { transform: translateY(-20px) rotate(10deg); }
      66% { transform: translateY(-40px) rotate(-10deg); }
      100% { transform: translateY(-70px) rotate(0) scale(0.7); opacity: 0; }
    }
  `;
  document.head.appendChild(style);
  
  // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –ø–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å –Ω–µ–±–æ–ª—å—à–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
  setTimeout(() => {
    displayMessage();
  }, 500);
  
  console.log('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ –ª—é–±–æ–≤–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∑–∞–≤–µ—Ä—à–µ–Ω–∞');
}

// –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é
window.initLoveMessageGenerator = initLoveMessageGenerator; 